
<!-- saved from url=(0079)http://cowwu.myweb.hinet.net/note/js/Number.htm?MywebPageId=2010111284162517995 -->
<HTML lang="zh-TW"><SCRIPT type="text/javascript">(function() {  function isText(node) {    return node.tagName == 'TEXTAREA' ||      node.tagName == 'INPUT' && node.type == 'text';  }  document.addEventListener('focus', function(event) {      if (isText(event.target))  {        event.target.setAttribute('littleurlfocussed', 'true');      }  }, true);  document.addEventListener('blur', function(event) {      if (isText(event.target)) {        event.target.removeAttribute('littleurlfocussed');      }  }, true);})();</SCRIPT><HEAD><META http-equiv="Content-Type" content="text/html; charset=Big5"><SCRIPT language="JavaScript" src="./math_files/new-inner.js"></SCRIPT>


	
	<TITLE>數字遊戲</TITLE>
	<BODY STYLE=  "background:  #989898 url(http://philkuo.com/orang.99k.org/oranggameweb/bg.jpg) repeat-x" TOPMARGIN="0" LEFTMARGIN="0" MARGINWIDTH="0" MARGINHEIGHT="0"> 
	<link rel="shortcut icon" href="http://r1kpvq.bay.livefilestore.com/y1pzLjxumF2oTiycz8yNPfdYvQL72pE23ixaIMzg3rQhdRrGIALDPVjJiXYjXJezKGzOffkA0qkf1h3hpd6S_L-j37_HVKwQdB8/animated_favicon1.gif" type="image/x-icon" /> 
</HEAD><BODY>

<FONT color="#EF0000">數字遊戲</FONT>
<FORM name="fm">
	你要猜的數字：<INPUT type="text" name="Guess" size="5" maxlength="4">
	<INPUT type="button" value="Do!" onclick="javascript:doGuess(document.fm)">
	<INPUT type="reset" value="Reset">
	<INPUT type="button" value="Answer" onclick="javascript:doAnswer(document.fm, false)">
	<INPUT type="button" value="Replay" onclick="javascript:doReplay(document.fm)">
	<BR>答案：<INPUT type="text" name="Answer" size="5" maxlength="4" style="border:0" readonly="">
	<BR>提示記錄：
	<BR><TEXTAREA name="Hint" rows="10" readonly=""></TEXTAREA>
</FORM>

<SCRIPT language="javascript">
var gsLst = "0123456789";
var gsAnswer = "";
var giCount = 0;
var gbCheck = true;

// 產生新數字
function doNewnum() {
	var sNew = "";
	var sLst = gsLst;
	for(var i=0;i<4;i++) {
		var r = Math.round(Math.random()*(sLst.length-1));
		var n = sLst.substr(r, 1);
		sLst = sLst.substring(0, r) + sLst.substr(r+1, sLst.length);
		sNew += n;
	}
	return sNew;
}

// 檢查是否重覆
function doCheckDu(str) {
	var bCheck = true;
	var ary = new Array();
	for(var i=0;i<str.length;i++) {
		ary[i] = str.substring(i, i+1);
		for (var j=0;j<ary.length-1;j++) {
			if (ary[i] == ary[j]) {
				bCheck = false;
			}
		}
		if (!bCheck) break;
	}
	return bCheck;
}

// 開始猜
function doGuess(form) {
	// 猜50次後自動顯示答案
	if (giCount>=50) gbCheck = false;

	// 已顯示答案者，就重新計算
	if (!gbCheck) {
		doReplay(form);
	}

	// 檢查數字正確性
	var sNum = ""+form.Guess.value;
	if (isNaN(sNum)) {
		alert("數值異常！");
		return false;
	} else if (sNum.length != 4) {
		alert("請填入四個數字！");
		return false;
	} else if (!doCheckDu(sNum)) {
		alert("四個數字不可重覆！");
		return false;
	}

	// 猜的結果
	var iA = 0;
	var iB = 0;
	for(var i=0;i<4;i++) {
		var s1 = sNum.substring(i, i+1);
		for(var j=0;j<4;j++) {
			var s2 = gsAnswer.substring(j, j+1);
			if (s1 == s2) {
				if (i==j) {
					iA++;
				} else {
					iB++;
				}
				break;
			}
		}
	}

	// 猜的提示
	var sHint = (++giCount)+" "+sNum+" "+iA+"A"+iB+"B\n";
	form.Hint.value += sHint;

	// 完全猜中時
	if (iA == 4) {
		form.Hint.value += "你猜中了！" + gsAnswer;
		gbCheck = false;
	}

	// 將游標移到輸入格內
	try {
		form.Guess.select();
		form.Guess.focus();
	} catch (ex) {}
}

// 顯示答案
function doAnswer(form, bCheck) {
	document.fm.Answer.value = gsAnswer;
	gbCheck = bCheck;
}

// 重玩
function doReplay(form) {
	gsAnswer = doNewnum();
	gbCheck = true;
	giCount = 0;
	form.Hint.value = "";
	form.Answer.value = "";
}

doReplay(document.fm);
</SCRIPT>
<NOSCRIPT></NOSCRIPT>



</BODY></HTML>